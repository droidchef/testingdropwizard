task(runService, dependsOn: 'classes', type: JavaExec) {
    main = mainClassName
    classpath = sourceSets.main.runtimeClasspath
    args 'server', configFile
    jvmArgs '-Dcom.sun.management.jmxremote', '-Dcom.sun.management.jmxremote.port=8083',
            '-Dcom.sun.management.jmxremote.local.only=false', '-Dcom.sun.management.jmxremote.authenticate=false',
            '-Dcom.sun.management.jmxremote.ssl=false'
}

//task(runServiceOnProduction, dependsOn: 'classes', type: JavaExec) {
//    main = mainClassName
//    classpath = sourceSets.main.runtimeClasspath
//    args 'server', prodConfigFile
//    jvmArgs '-Dcom.sun.management.jmxremote', '-Dcom.sun.management.jmxremote.port=24103',
//            '-Dcom.sun.management.jmxremote.local.only=false', '-Dcom.sun.management.jmxremote.authenticate=false',
//            '-Dcom.sun.management.jmxremote.ssl=false', '-Xms5632m', '-Xmx5632m', '-XX:NewRatio=1'
//}

jar {
    manifest {
        attributes("Main-Class": mainClassName)
    }
}
